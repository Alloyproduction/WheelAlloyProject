<odoo>
    <data>

        <record id="crm_lead_form_inherit2" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="sale_crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(sale_crm.sale_action_quotations_new)d']" position="replace">
                    <button string="New Quotation" name="get_quotation_order" type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('probability', '=', 0), ('active', '=', False)]}"
                            groups="alloy_crm_modification.group_view_create_crm_quotation_button"
                    />
                </xpath>
            </field>
        </record>

        <record id="crm_lead_form_inherit" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="after">
                    <field name="logistic_user_id"  />
                    <field name="lead_user_id"  />
                    <field name="agency_location_id" />
                    <field name="car_type_id" />
                    <field name="is_insured" />
                    <field name="claim_number" attrs="{'invisible':[('is_insured','=',False)],'required':[('is_insured','=',True)]}"/>
                    <field name="is_company" invisible="1"/>
                    <field name="crm_source_id" attrs="{'required':[('is_company','=',False)],
                                                        'invisible':[('is_company','=',True)]}"/>
                    <field name="city_id" required="1"/>
                    <field name="sales_id" readonly="1"/>
                </xpath>

                <xpath expr="//header" position="inside">
                    <button string="Send to Logistic"
                            name="send_notification_to_logistic"
                            type="object" class="oe_highlight"
                            groups="alloy_crm_modification.view_send_logistic_button" invisible="1"/>
<!--                            attrs="{'invisible': [('state', '!=', 'draft')]}"-->

                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page string="Order Lines">
                        <field name="crm_order_line_ids">
                            <tree string="Sales Order Lines" editable="bottom">
                                <field name="product_id"/>
                                <!--<field name="name" widget="section_and_note_text"/>-->
                                <field name="product_uom_qty" string="Ordered Qty"/>
                                <!--<field name="product_uom"/>-->
                                <!--<field name="price_unit"/>-->
                            </tree>
                        </field>
                    </page>
                </xpath>

            </field>
        </record>


        <record id="crm_lead_form_inherit33" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
            <field name="arch" type="xml">

                <xpath expr="//header" position="inside">
                    <button string="Send to Logistic"
                            name="send_notification_to_logistic"
                            type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('probability', '=', 0), ('active', '=', False)]}"
                            groups="alloy_crm_modification.view_send_logistic_button"
                            />
                    <button string="New Quotation"
                            name="get_quotation_order"
                            type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('probability', '=', 0), ('active', '=', False)]}"
                            groups="alloy_crm_modification.group_view_create_crm_quotation_button"
                            />
                </xpath>

                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='mobile']" position="after">
                    <field name="logistic_user_id"  />
                    <field name="lead_user_id"  />
                    <field name="agency_location_id" />
                    <field name="car_type_id" />
                    <field name="is_insured" />
                    <field name="claim_number" attrs="{'invisible':[('is_insured','=',False)],'required':[('is_insured','=',True)]}"/>
                    <field name="is_company" invisible="1"/>
                    <field name="crm_source_id" attrs="{'required':[('is_company','=',False)],
                                                        'invisible':[('is_company','=',True)]}"/>
                    <field name="city_id" required="1"/>
                </xpath>

                <xpath expr="//notebook" position="inside">
                    <page string="Order Lines">
                        <field name="crm_order_line_ids">
                            <tree string="Sales Order Lines" editable="bottom">
                                <field name="product_id"/>
                                <!--<field name="name" widget="section_and_note_text"/>-->
                                <field name="product_uom_qty" string="Ordered Qty"/>
                                <!--<field name="product_uom"/>-->
                                <!--<field name="price_unit"/>-->
                            </tree>
                        </field>
                    </page>
                </xpath>

            </field>
        </record>



        <record id="res_city_form_view" model="ir.ui.view">
            <field name="name">city</field>
            <field name="model">res.city</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="name" required="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="res_city_tree_view" model="ir.ui.view">
            <field name="name">city</field>
            <field name="model">res.city</field>
            <field name="arch" type="xml">
                <tree string="">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record id="res_city_view_action" model="ir.actions.act_window">
            <field name="name">City</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.city</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="res_city_root" name="City" parent="crm.crm_menu_sales" action="res_city_view_action"/>


         <record id="sale_lead_form_inherit" model="ir.ui.view">
            <field name="name">sale.order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='user_id']" position="after">
                        <field name="lead_user_id"  readonly="1"/>
                        <field name="sales_user_id" readonly="1"/>
                        <field name="opportunity_id" readonly="1"/>
                        <field name="user_id" invisible="1"/>


                        <field name="sales_stage" />

                </xpath>
   <xpath expr="//field[@name='state']" position="attributes">

<attribute name="statusbar_visible">"draft,sent,sign,sale"</attribute>

                </xpath>

                 <xpath expr="//header" position="after">
                     <header>
                        <button name="send_salesman" type="object"
                                string="Send to salesman" class="oe_highlight"  groups="alloy_crm_modification.view_send_logistic_button" />
                     </header>
                </xpath>
            </field>
         </record>


<record id="sales_order_list_salesman_inherit" model="ir.ui.view">
            <field name="name">sale.order.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>

            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">

                        <field name="sales_user_id" readonly="1"/>

                </xpath>
            </field>
        </record>

    </data>
</odoo>