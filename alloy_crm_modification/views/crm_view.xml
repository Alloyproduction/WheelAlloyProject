<odoo>
    <data>
 <template id="assets_backend_timer" name="timer assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/alloy_crm_modification/static/src/js/change_color.js"></script>
            <!--     <script type="text/javascript" src="/project_task_timer_app/static/src/js/play_suggestion.js"></script>   -->
            </xpath>
        </template>

        <record id="crm_lead_form_inherit2" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="sale_crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(sale_crm.sale_action_quotations_new)d']" position="replace">
                    <button string="New Quotation" name="get_quotation_order" type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('probability', '=', 0)]}"
                            groups="alloy_crm_modification.group_view_create_crm_quotation_button"
                    />

<!--                    <button name="action_set_won_rainbowman" string="Mark Won" type="object" class="oe_highlight" attrs="{'invisible': ['|',('probability', '=', 100)]}"/>-->
<!--                        <button name="1376" string="Mark Lost" type="action" class="oe_highlight" context="{'default_lead_id': active_id}" attrs="{'invisible': [('probability', '&lt;', 100)]}"/>-->
<!--                        <button name="toggle_active" string="Restore" type="object" attrs="{'invisible': ['|', ('probability', '&gt;', 0),]}"/>-->
<!--                        <field name="stage_id" widget="statusbar" options="{'clickable': '1', 'fold_field': 'fold'}" domain="['|', ('team_id', '=', team_id), ('team_id', '=', False)]" attrs="{'invisible': [('active', '=', False)]}"/>-->

                </xpath>
            </field>
        </record>

        <record id="crm_lead_form_inherit" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="after">
                    <field name="mobile"  />
                    <field name="logistic_user_id"  />
                    <field name="lead_user_id"  />
                    <field name="agency_location_id" />
                    <field name="car_type_id" string="Car Make"  />
                    <field name="is_insured" />
                    <field name="claim_number" attrs="{'invisible':[('is_insured','=',False)],'required':[('is_insured','=',True)]}"/>
                    <field name="is_company" invisible="1"/>
                    <field name="is_lost_blue" invisible="1"/>
                    <field name="is_lost_green" invisible="1"/>
                    <field name="is_lost" invisible="1"/>
                    <field name="crm_source_id" attrs="{'required':[('is_company','=',False)],
                                                        'invisible':[('is_company','=',True)]}"/>
                    <field name="city_id" required="1"/>
                    <field name="location" string="Location" widget="url"/>
                    <field name="sales_id" readonly="1"/>
                </xpath>

                <xpath expr="//field[@name='user_id']" position="before">
                    <field name="call_reason" string="Call Reason"/>
                    <field name="call_reason_explain" string="Explain the Reason"/>
                </xpath>


                <xpath expr="//header" position="inside">
                    <button string="Send to Logistic"
                            name="send_notification_to_logistic"
                            type="object" class="oe_highlight"
                            groups="alloy_crm_modification.view_send_logistic_button" invisible="1"/>
<!--                            attrs="{'invisible': [('state', '!=', 'draft')]}"-->
                    
                    <field name="stage_id" widget="statusbar"
                           options="{'clickable': '1', 'fold_field': 'fold'}"/>

                </xpath>
                <xpath expr="//notebook" position="inside">
                    <page string="Order Lines">
                        <field name="crm_order_line_ids">
                            <tree string="Sales Order Lines" editable="bottom">
                                <field name="product_id"/>
                                <!--<field name="name" widget="section_and_note_text"/>-->
                                <field name="product_uom_qty" string="Ordered Qty"/>
                                <!--<field name="product_uom"/>-->
                                <!--<field name="price_unit"/>-->
                            </tree>
                        </field>
                    </page>
                </xpath>

            </field>
        </record>


        <record id="crm_lead_form_inherit33" model="ir.ui.view">
            <field name="name">crm.lead</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
            <field name="arch" type="xml">

                <xpath expr="//header" position="inside">
                    <button string="Send to Logistic"
                            name="send_notification_to_logistic"
                            type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('stage_id', '=', 'Lost'),('probability', '=', 0), ('active', '=', False)]}"
                            groups="alloy_crm_modification.view_send_logistic_button"
                            />
                    <button string="New Quotation"
                            name="get_quotation_order"
                            type="object" class="oe_highlight"
                            attrs="{'invisible': ['&amp;', ('stage_id', '=', 'Lost'),('probability', '=', 0), ('active', '=', False)]}"
                            groups="alloy_crm_modification.group_view_create_crm_quotation_button"
                            />
<!--                    <button name="1376"-->
<!--                             string="Mark Lost"-->
<!--                             type="action"-->
<!--                             class="oe_highlight"-->
<!--                             context="{'default_lead_id': active_id}"-->
<!--                             attrs="{'invisible': [('active', '=', False),('probability', '&lt;', 100)]}" />-->

                   </xpath>

                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='mobile']" position="after">
                    <field name="logistic_user_id"  />
                    <field name="lead_user_id"  />
                    <field name="agency_location_id" />
                    <field name="car_type_id" string="Car Make" />
                    <field name="is_insured" />
                    <field name="claim_number" attrs="{'invisible':[('is_insured','=',False)],'required':[('is_insured','=',True)]}"/>
                    <field name="is_company" invisible="1"/>
                    <field name="crm_source_id" attrs="{'required':[('is_company','=',False)],
                                                        'invisible':[('is_company','=',True)]}"/>
                    <field name="city_id" required="1"/>
                    <field name="is_lost" required="1"/>
                    <field name="location" string="Location Link" widget="url"/>
                </xpath>

                <xpath expr="//field[@name='website']" position="after">
                    <field name="call_reason" string="Call Reason"/>
                    <field name="call_reason_explain" string="Explain the Reason"/>
                </xpath>

                 <xpath expr="//field[@name='tag_ids']" position="after">
                    <field name="lost_reason" string="Lost Reason" attrs="{'invisible':[('is_lost','=',False)]}"/>
                    <field name="explain_lost_reason" string="Explain the Reason" attrs="{'invisible':[('is_lost','=',False)]}"/>
                </xpath>

                <xpath expr="//notebook" position="inside">
                    <page string="Order Lines">
                        <field name="crm_order_line_ids">
                            <tree string="Sales Order Lines" editable="bottom">
                                <field name="product_id"/>
                                <!--<field name="name" widget="section_and_note_text"/>-->
                                <field name="product_uom_qty" string="Ordered Qty"/>
                                <!--<field name="product_uom"/>-->
                                <!--<field name="price_unit"/>-->
                            </tree>
                        </field>
                    </page>
                </xpath>

            </field>
        </record>



        <record id="res_city_form_view" model="ir.ui.view">
            <field name="name">city</field>
            <field name="model">res.city</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="name" required="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="res_city_tree_view" model="ir.ui.view">
            <field name="name">city</field>
            <field name="model">res.city</field>
            <field name="arch" type="xml">
                <tree string="">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record id="res_city_view_action" model="ir.actions.act_window">
            <field name="name">City</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.city</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="res_city_root" name="City" parent="crm.crm_menu_sales" action="res_city_view_action"/>


         <record id="sale_lead_form_inherit" model="ir.ui.view">
            <field name="name">sale.order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="readonly">True</attribute>
                </xpath>

                <xpath expr="//field[@name='user_id']" position="after">
                        <field name="lead_user_id"  readonly="1"/>
                        <field name="sales_user_id" readonly="1"/>
                        <field name="opportunity_id" readonly="1"/>
                        <field name="user_id" invisible="1"/>


                        <field name="sales_stage" />

                </xpath>

<!--                <xpath expr="//field[@name='qc_slip_id']" position="after">-->
<!--                     <field name="offer_valid" />-->
<!--                </xpath>-->
<!--                #######################################################################################-->

   <xpath expr="//field[@name='state']" position="attributes">

<attribute name="statusbar_visible">"draft,sent,sign,sale"</attribute>

                </xpath>

                 <xpath expr="//header" position="after">
                     <header>
                        <button name="send_salesman" type="object"
                                string="Send to salesman" class="oe_highlight"  groups="alloy_crm_modification.view_send_logistic_button" />
                     </header>
                </xpath>
            </field>
         </record>

        <record id="sale_order_form_inherit111" model="ir.ui.view">
            <field name="name">sale.order</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <field name="order_line" attrs="{'readonly': [('state','in', ['reject','done')]}"/>


                <xpath expr="//header" position="inside">

                    <button name="action_reject" string="Reject"
                            type="object" class="oe_highlight" states="draft,sent,sign,sale,done,cancel" groups= "sales_team.group_sale_manager" />/>
                    <!--                        attrs="{'invisible': [('is_task_Q_delivered', '=', False)]}"-->

                </xpath>


            </field>
        </record>











        <record id="sales_order_view_field_security_inherit" model="ir.ui.view">
            <field name="name">sales_order_view_field_security_inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="groups_id" eval="[(6, 0, [ref('sales_team.group_sale_manager')])]"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="readonly">False</attribute>
                </xpath>
            </field>
        </record>



<record id="sales_order_list_salesman_inherit" model="ir.ui.view">
            <field name="name">sale.order.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>

            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">

                        <field name="sales_user_id" readonly="1"/>

                </xpath>
            </field>
        </record>



             <record id="crm_inherit" model="ir.ui.view">
            <field name="name">crm.leads</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
            <field name="arch" type="xml">
                 <field name="partner_id" position="attributes">
                            <attribute name="class"> .o_kanban_record_title</attribute>
                    </field>
                <xpath expr="//kanban[1]/templates[1]/t[1]/div[1]/div[2]/div[4]/div[1]/field[@name='activity_ids']" position="after"  >

 <field name="is_lost_blue" widget="boolean" invisible="1"/>
                     <field name="is_lost_green" widget="boolean" invisible="1"/>
    				   <field name="is_lost"   widget="change_color"  />
            	</xpath>

            </field>
         </record>


          <record id='vehicle_name_view_form' model='ir.ui.view'>
        <field name="name">crm.call.reason.form</field>
        <field name="model">crm.call.reason</field>
        <field name="arch" type="xml">
            <form string="Crm Call Reason">
                <sheet>
                    <group>
                        <field name="name" string="Name"/>
                        <field name="description" string="Description"/>
<!--                        <field name="car_name1" string="Car model"/>-->
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id='vehicle_price_view_tree' model='ir.ui.view'>
        <field name="name">crm.call.reason.tree</field>
        <field name="model">crm.call.reason</field>
        <field name="arch" type="xml">
            <tree string="Crm Call Reason">
                <field name="name" string="Name"/>
                <field name="description" string="Description"/>
            </tree>
        </field>
    </record>


    <record id='crm_call_reason_action' model='ir.actions.act_window'>
        <field name="name">Crm Call Reason</field>
        <field name="res_model">crm.call.reason</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new Crm Call Reason
            </p>
        </field>
    </record>

        <menuitem name="Call Reason" id="crm_call_reason" parent="crm.crm_menu_sales"
              action="crm_call_reason_action"/>




    </data>
</odoo>
